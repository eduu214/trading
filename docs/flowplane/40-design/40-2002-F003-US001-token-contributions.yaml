version: 2.0
story: F003-US001
feature: F003

contributed_tokens:
  spacing:
    scale:
      80:
        value: "320px"
        justification: "Chart height for efficient frontier visualization requires specific dimension"
        usage_count: 2
        elements: ["efficient-frontier-chart", "performance-visualization"]
        
  colors:
    semantic:
      constraint_error:
        value: "red.100"
        justification: "Light error background for constraint violation feedback in portfolio optimization"
        usage_count: 3
        elements: ["constraint-input-error", "validation-message-bg", "error-panel-highlight"]
        
  effects:
    opacity:
      medium:
        value: "0.6"
        justification: "Loading overlay opacity during portfolio optimization calculations"
        usage_count: 2
        elements: ["optimization-overlay", "loading-backdrop"]

documented_exceptions:
  efficient_frontier_gradient:
    value: "linear-gradient(135deg, #3b82f6 0%, #22c55e 100%)"
    justification: "Chart library requires CSS gradient for efficient frontier area fill, no token API support"
    usage: "Efficient frontier chart background only"
    mitigation: "Will migrate when chart library v3.0 supports design token gradients"
    
token_usage_summary:
  existing_tokens_used: 88  # percentage
  new_patterns_proposed: 10  # percentage
  documented_exceptions: 2   # percentage
  
  existing_breakdown:
    p25_original: 75
    p40_10_contributions: 13
    
pattern_rationale: "Portfolio optimization requires specific chart dimensions and constraint validation feedback patterns that extend beyond base component needs but are reusable across portfolio management features"