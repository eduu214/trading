# UX Specification: F003-US003
## Version: 2.0

## Overview
Provide comprehensive risk monitoring and management controls through a real-time dashboard that displays portfolio VaR, individual strategy drawdowns, and aggregate position limits with immediate alert capabilities.

## User Flow (Happy Path)
1. Entry: User navigates to Risk Management Dashboard from main navigation
2. Overview: System displays real-time portfolio risk metrics with visual indicators
3. Drill-down: User clicks on specific risk metric to view detailed breakdown
4. Monitoring: User reviews individual strategy performance and position limits
5. Action: User acknowledges alerts and optionally adjusts risk parameters
6. Completion: Dashboard continues real-time monitoring with updated thresholds

## Screen Specifications

### Screen: Risk Management Dashboard
**Purpose**: Central command center for monitoring all portfolio risk metrics in real-time

**Layout**:
- USES: page_header from P40-10
- USES: main_navigation from P40-10
- USES: grid_layout from P40-10 (3-column responsive layout)
- USES: data_card from P40-10 (risk metric containers)
- USES: alert_banner from P40-10 (critical alerts)

**Design Tokens**:
```yaml
layout:
  container_padding: "spacing.semantic.2xl"
  section_gap: "spacing.semantic.xl"
  metric_grid_gap: "spacing.semantic.lg"
  
colors:
  background: "colors.semantic.background"
  surface: "colors.semantic.surface_elevated"
  text_primary: "colors.semantic.text.primary"
  text_secondary: "colors.semantic.text.secondary"
  
  # Risk-specific color mapping
  risk_low: "colors.semantic.profit"
  risk_medium: "colors.semantic.warning"
  risk_high: "colors.semantic.loss"
  
typography:
  dashboard_title: "typography.semantic.h2"
  section_title: "typography.semantic.h4"
  metric_value: "typography.semantic.price_large"
  metric_label: "typography.semantic.body_sm"
  
effects:
  card_shadow: "effects.semantic.card"
  transition: "effects.semantic_transitions.hover"
```

**Component Customization**:
```yaml
page_header:
  overrides:
    title: "Risk Management Dashboard"
    subtitle: "Real-time portfolio risk monitoring and controls"
    
grid_layout:
  overrides:
    columns: 3
    gap: "spacing.semantic.lg"
    responsive:
      mobile: 1
      tablet: 2
      desktop: 3
```

**Interactions**:
- Click risk metric card: Navigate to detailed risk breakdown screen
- Hover metric display: Show tooltip with calculation details using `effects.semantic_transitions.hover`
- Click alert banner: Expand alert details with `colors.semantic.status.error` background
- Real-time updates: Metrics refresh every 30 seconds with `effects.semantic_transitions.normal`

**Responsive Behavior**:
- Mobile (<768px): Single column stack, `spacing.semantic.md` gaps
- Tablet (768-1024px): Two column grid, `spacing.semantic.lg` gaps  
- Desktop (>1024px): Three column grid, `spacing.semantic.xl` gaps

### Screen: Strategy Risk Breakdown
**Purpose**: Detailed view of individual strategy risk contributions and drawdown analysis

**Layout**:
- USES: page_header from P40-10
- USES: breadcrumb from P40-10
- USES: data_table from P40-10 (strategy list)
- USES: performance_chart from P40-10 (drawdown visualization)
- USES: strategy_card from P40-10 (individual strategy details)

**Design Tokens**:
```yaml
layout:
  content_padding: "spacing.semantic.xl"
  chart_height: "spacing.scale.80"
  table_margin: "spacing.semantic.lg"
  
colors:
  chart_background: "colors.semantic.surface_elevated"
  drawdown_line: "colors.semantic.loss"
  recovery_area: "colors.semantic.profit"
  neutral_line: "colors.semantic.neutral"
  
typography:
  chart_title: "typography.semantic.h5"
  table_header: "typography.semantic.body"
  numeric_data: "typography.families.mono"
  
effects:
  chart_shadow: "effects.semantic.card"
  hover_transition: "effects.semantic_transitions.hover"
```

**Component Customization**:
```yaml
breadcrumb:
  overrides:
    path: ["Dashboard", "Risk Management", "Strategy Breakdown"]
    
data_table:
  overrides:
    columns: ["Strategy", "Current Drawdown", "Max Drawdown", "Risk Contribution", "Status"]
    sortable: true
    
performance_chart:
  overrides:
    type: "line"
    height: 320
    showGrid: true
    interactive: true
```

**Interactions**:
- Click strategy row: Open strategy detail modal using `modal` from P40-10
- Hover chart data points: Display tooltip with `colors.semantic.surface_elevated` background
- Sort table columns: Visual feedback with `colors.semantic.primary` highlighting
- Filter by risk level: Update display with `effects.semantic_transitions.normal`

### Screen: Position Limits Monitor
**Purpose**: Monitor aggregate position limits across all strategies with real-time utilization

**Layout**:
- USES: page_header from P40-10
- USES: breadcrumb from P40-10
- USES: metric_display from P40-10 (limit utilization)
- USES: data_card from P40-10 (position summaries)
- USES: status_badge from P40-10 (limit status indicators)

**Design Tokens**:
```yaml
layout:
  metrics_grid: "grid.columns"
  card_spacing: "spacing.semantic.lg"
  utilization_height: "spacing.scale.12"
  
colors:
  utilization_bg: "colors.semantic.surface"
  utilization_fill: "colors.semantic.primary"
  limit_warning: "colors.semantic.warning"
  limit_critical: "colors.semantic.loss"
  limit_safe: "colors.semantic.profit"
  
typography:
  limit_value: "typography.semantic.price"
  utilization_label: "typography.semantic.caption"
  percentage_display: "typography.semantic.percentage"
  
effects:
  progress_transition: "effects.semantic_transitions.normal"
  alert_pulse: "effects.semantic_transitions.fast"
```

**Component Customization**:
```yaml
metric_display:
  overrides:
    format: "percentage"
    trend: "dynamic_based_on_utilization"
    
status_badge:
  overrides:
    status: "success|warning|error"
    text: "Within Limits|Approaching Limit|Limit Exceeded"
```

**Interactions**:
- Click utilization bar: Show detailed position breakdown
- Hover limit indicator: Display calculation methodology tooltip
- Adjust limit threshold: Inline editing with validation using `form_field` from P40-10
- Real-time updates: Position data refreshes every 15 seconds

## State Management
**States with Token References**:
```yaml
loading:
  spinner_color: "colors.semantic.primary"
  overlay_background: "colors.semantic.surface"
  
real_time_update:
  highlight_color: "colors.semantic.primary_light"
  transition: "effects.semantic_transitions.fast"
  
alert_active:
  background: "colors.semantic.status.error"
  text: "colors.semantic.text.inverse"
  border: "colors.semantic.loss"
  
risk_threshold_exceeded:
  background: "colors.semantic.status.warning"
  text: "colors.semantic.text.primary"
  pulse_effect: "effects.semantic_transitions.fast"
```

## Shared Components Usage Summary
- page_header: All 3 screens
- main_navigation: Dashboard screen
- breadcrumb: 2 detail screens
- grid_layout: Dashboard layout
- data_card: 8 instances across screens
- metric_display: 6 instances for risk metrics
- data_table: Strategy breakdown screen
- performance_chart: Drawdown visualization
- strategy_card: Individual strategy details
- status_badge: Position limit indicators
- alert_banner: Critical risk alerts
- modal: Strategy detail popups

## Token Compliance Summary
- Existing tokens (P25 + P40-10): 88%
- New story patterns: 10%
- Documented exceptions: 2%