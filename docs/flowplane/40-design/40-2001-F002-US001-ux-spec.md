# UX Specification: F002-US001
## Version: 2.0

## Overview
Implement proven trading strategies using technical indicators with comprehensive backtesting validation, enabling users to create, test, and validate strategies with RSI, MACD, Bollinger Bands, and ATR indicators.

## User Flow (Happy Path)
1. Entry: User navigates to Strategy Builder from main navigation
2. Configuration: User selects technical indicators and sets parameters (RSI 14-period, MACD 12/26/9, etc.)
3. Backtesting: System runs 6+ months historical data validation with performance metrics
4. Validation: User reviews Sharpe ratio >1.0, max drawdown <15%, win rate >45% results
5. Approval: User approves strategy for paper trading transition
6. Completion: Strategy moves to paper trading phase with performance tracking

## Screen Specifications

### Screen: Strategy Builder
**Purpose**: Configure technical indicators and strategy parameters for backtesting

**Layout**:
- USES: page_header from P40-10
- USES: main_navigation from P40-10
- USES: form_field from P40-10
- USES: select_dropdown from P40-10
- USES: button from P40-10
- Grid: Two-column layout with configuration panel (60%) and preview panel (40%)

**Design Tokens**:
```yaml
layout:
  container_padding: "spacing.semantic.2xl"
  section_gap: "spacing.semantic.xl"
  form_gap: "spacing.semantic.lg"
  
colors:
  background: "colors.semantic.background"
  panel_background: "colors.semantic.surface_elevated"
  border: "colors.semantic.border.subtle"
  
typography:
  section_heading: "typography.semantic.h4"
  field_label: "typography.semantic.body"
  help_text: "typography.semantic.caption"
```

**Component Customization**:
```yaml
page_header:
  overrides:
    title: "Strategy Builder"
    subtitle: "Configure technical indicators and backtesting parameters"

form_field:
  overrides:
    label_color: "colors.semantic.text.secondary"
    
select_dropdown:
  overrides:
    placeholder: "Select indicator..."
```

**Interactions**:
- Select indicator: Dropdown expands with `effects.semantic.dropdown` shadow
- Parameter change: Real-time preview updates with `effects.semantic_transitions.fast`
- Start backtest: Button shows loading state with `colors.semantic.primary_hover`

**Responsive Behavior**:
- Mobile (<768px): Single column stack, `spacing.semantic.lg` gaps
- Desktop (>768px): Two-column grid, `spacing.semantic.xl` gaps

### Screen: Backtesting Results
**Purpose**: Display comprehensive backtesting performance metrics and validation results

**Layout**:
- USES: page_header from P40-10
- USES: data_card from P40-10
- USES: metric_display from P40-10
- USES: performance_chart from P40-10
- USES: data_table from P40-10
- USES: button from P40-10
- Grid: Metrics overview (top), performance chart (center), trade details (bottom)

**Design Tokens**:
```yaml
layout:
  metrics_grid: "grid.columns"
  chart_height: "spacing.scale.80"
  table_max_height: "spacing.scale.96"
  
colors:
  success_metric: "colors.semantic.profit"
  warning_metric: "colors.semantic.warning"
  failed_metric: "colors.semantic.loss"
  
typography:
  metric_value: "typography.semantic.price_large"
  metric_label: "typography.semantic.body_sm"
```

**Component Customization**:
```yaml
metric_display:
  overrides:
    sharpe_ratio:
      trend: "positive" # if >1.0
      format: "number"
    max_drawdown:
      trend: "negative" # if >15%
      format: "percentage"
    win_rate:
      trend: "positive" # if >45%
      format: "percentage"

performance_chart:
  overrides:
    type: "line"
    height: 320
    showGrid: true
    interactive: true
```

**Interactions**:
- Hover metric: Show tooltip with `effects.shadows.sm`
- Chart interaction: Crosshair with `colors.semantic.text.tertiary`
- Approve strategy: Button transitions to success state with `colors.semantic.profit`

**Responsive Behavior**:
- Mobile (<768px): Metrics stack vertically, chart height reduces to `spacing.scale.64`
- Desktop (>768px): 3-column metrics grid, full chart display

### Screen: Strategy Validation
**Purpose**: Final validation screen showing walk-forward analysis and deployment readiness

**Layout**:
- USES: page_header from P40-10
- USES: alert_banner from P40-10
- USES: data_card from P40-10
- USES: status_badge from P40-10
- USES: button from P40-10
- Grid: Validation summary (top), detailed analysis (center), action buttons (bottom)

**Design Tokens**:
```yaml
layout:
  validation_grid: "spacing.semantic.2xl"
  summary_padding: "spacing.semantic.xl"
  
colors:
  validation_pass: "colors.semantic.status.success"
  validation_warning: "colors.semantic.status.warning"
  validation_fail: "colors.semantic.status.error"
  
typography:
  validation_title: "typography.semantic.h5"
  validation_detail: "typography.semantic.body"
```

**Component Customization**:
```yaml
alert_banner:
  overrides:
    type: "success" # if all validations pass
    title: "Strategy Validation Complete"
    message: "All performance thresholds met. Ready for paper trading."

status_badge:
  overrides:
    sharpe_validation:
      status: "success" # if >1.0
      text: "Sharpe: 1.24"
    drawdown_validation:
      status: "success" # if <15%
      text: "Drawdown: 8.5%"
```

**Interactions**:
- Deploy to paper trading: Primary button with confirmation modal
- Modify strategy: Secondary button returns to builder
- View detailed report: Link opens modal with full analysis

**Responsive Behavior**:
- Mobile (<768px): Single column layout, condensed validation cards
- Desktop (>768px): Two-column validation grid with detailed metrics

## State Management
**States with Token References**:
```yaml
backtesting_in_progress:
  spinner_color: "colors.semantic.primary"
  overlay_background: "colors.semantic.surface"
  progress_bar: "colors.semantic.primary"
  
validation_complete:
  success_background: "colors.semantic.status.success"
  success_border: "colors.semantic.profit"
  
validation_failed:
  error_background: "colors.semantic.status.error"
  error_text: "colors.semantic.loss"
  retry_button: "colors.semantic.warning"
```

## Shared Components Usage Summary
- page_header: All 3 screens
- form_field: Strategy Builder (6 instances)
- select_dropdown: Strategy Builder (4 instances)
- button: All screens (8 total instances)
- data_card: Results and Validation screens (5 instances)
- metric_display: Results screen (4 instances)
- performance_chart: Results screen (1 instance)
- data_table: Results screen (1 instance)
- alert_banner: Validation screen (1 instance)
- status_badge: Validation screen (3 instances)

## Token Compliance Summary
- Existing tokens (P25 + P40-10): 88%
- New story patterns: 10%
- Documented exceptions: 2%