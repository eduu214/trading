# UX Specification: F006-US002
## Version: 2.0

## Overview
Portfolio management dashboard providing comprehensive real-time monitoring and management of strategy portfolio with risk metrics, allocation visualization, and individual strategy performance tracking.

## User Flow (Happy Path)
1. Entry: User navigates to Portfolio Dashboard from main navigation
2. Overview: System displays current portfolio state with key metrics and allocation chart
3. Strategy Review: User reviews individual strategy performance in strategy grid
4. Allocation Management: User views and adjusts strategy allocations using interactive controls
5. Risk Monitoring: User monitors portfolio risk metrics and correlation matrix
6. Action: User makes allocation adjustments or strategy status changes as needed

## Screen Specifications

### Screen: Portfolio Dashboard
**Purpose**: Central command center for portfolio monitoring and management

**Layout**:
- USES: main_navigation from P40-10
- USES: page_header from P40-10
- USES: grid_layout from P40-10 (3-column responsive layout)
- USES: data_card from P40-10 (portfolio summary cards)
- USES: metric_display from P40-10 (key performance metrics)

**Design Tokens**:
```yaml
layout:
  container_padding: "spacing.semantic.2xl"
  section_gap: "spacing.semantic.xl"
  card_grid_gap: "spacing.semantic.lg"
  
colors:
  background: "colors.semantic.background"
  section_background: "colors.semantic.surface"
  text_primary: "colors.semantic.text.primary"
  text_secondary: "colors.semantic.text.secondary"
  
typography:
  page_title: "typography.semantic.h2"
  section_title: "typography.semantic.h4"
  metric_label: "typography.semantic.body_sm"
```

**Component Customization**:
```yaml
page_header:
  overrides:
    title: "Portfolio Management"
    subtitle: "Real-time portfolio monitoring and strategy allocation"
    
grid_layout:
  overrides:
    columns: 3
    gap: "spacing.semantic.lg"
    responsive:
      mobile: 1
      tablet: 2
      desktop: 3
```

**Interactions**:
- Click strategy card: Navigate to strategy detail view
- Hover metric display: Show detailed tooltip with historical context
- Click allocation chart segment: Highlight related strategy in grid

**Responsive Behavior**:
- Mobile (<768px): Single column layout, stacked metrics
- Tablet (768px-1024px): Two column layout, condensed metrics
- Desktop (>1024px): Three column layout, full metrics display

### Screen: Strategy Grid Section
**Purpose**: Display all active strategies with performance metrics and status

**Layout**:
- USES: strategy_card from P40-10 (strategy display)
- USES: status_badge from P40-10 (strategy status)
- USES: performance_chart from P40-10 (mini performance charts)
- USES: grid_layout from P40-10 (responsive strategy grid)

**Design Tokens**:
```yaml
layout:
  grid_columns: 3
  grid_gap: "spacing.semantic.lg"
  card_padding: "components.card.padding"
  
colors:
  card_background: "colors.semantic.surface_elevated"
  card_border: "colors.semantic.border.subtle"
  performance_positive: "colors.semantic.profit"
  performance_negative: "colors.semantic.loss"
  
typography:
  strategy_name: "typography.semantic.h5"
  metric_value: "typography.semantic.price"
  metric_label: "typography.semantic.caption"
```

**Component Customization**:
```yaml
strategy_card:
  overrides:
    show_mini_chart: true
    show_allocation: true
    show_status: true
    
performance_chart:
  overrides:
    height: 80
    type: "line"
    interactive: false
    showGrid: false
```

**Interactions**:
- Click strategy card: Open strategy detail modal
- Click status badge: Show status change options
- Hover performance chart: Display performance tooltip

### Screen: Portfolio Allocation Section
**Purpose**: Visual representation of portfolio allocation with adjustment controls

**Layout**:
- USES: data_card from P40-10 (allocation container)
- Custom allocation chart component (donut chart)
- USES: button from P40-10 (rebalance actions)

**Design Tokens**:
```yaml
layout:
  chart_container_height: "spacing.scale.80"
  controls_gap: "spacing.semantic.md"
  
colors:
  chart_segments: "colors.semantic.primary"
  chart_background: "colors.semantic.surface"
  allocation_text: "colors.semantic.text.primary"
  target_line: "colors.semantic.warning"
  
typography:
  allocation_percentage: "typography.semantic.price_large"
  strategy_label: "typography.semantic.body_sm"
```

**Documented Exceptions**:
```yaml
allocation_chart_colors:
  value: ["#3b82f6", "#10b981", "#f59e0b", "#ef4444", "#8b5cf6", "#06b6d4"]
  justification: "Chart library requires color array for segment differentiation"
  usage: "Portfolio allocation donut chart segments only"
```

**Interactions**:
- Click chart segment: Select strategy for allocation adjustment
- Drag allocation slider: Adjust strategy allocation percentage
- Click rebalance button: Execute portfolio rebalancing

### Screen: Risk Metrics Section
**Purpose**: Display portfolio risk metrics and correlation analysis

**Layout**:
- USES: metric_display from P40-10 (VaR, Sharpe ratio, max drawdown)
- USES: correlation_matrix from P40-10 (strategy correlations)
- USES: data_card from P40-10 (risk summary container)

**Design Tokens**:
```yaml
layout:
  metrics_grid_columns: 4
  metrics_gap: "spacing.semantic.md"
  matrix_container_padding: "spacing.semantic.lg"
  
colors:
  risk_high: "colors.semantic.status.error"
  risk_medium: "colors.semantic.status.warning"
  risk_low: "colors.semantic.status.success"
  correlation_high: "colors.semantic.loss"
  correlation_medium: "colors.semantic.warning"
  correlation_low: "colors.semantic.profit"
  
typography:
  risk_value: "typography.semantic.price"
  risk_label: "typography.semantic.body_sm"
  correlation_label: "typography.semantic.caption"
```

**Component Customization**:
```yaml
correlation_matrix:
  overrides:
    showValues: true
    interactive: true
    
metric_display:
  overrides:
    format: "percentage"
    trend: "dynamic"
```

**Interactions**:
- Hover correlation cell: Show strategy pair details
- Click risk metric: Show historical risk chart
- Click correlation warning: Show diversification recommendations

## State Management
**States with Token References**:
```yaml
loading:
  spinner_color: "colors.semantic.primary"
  overlay_background: "colors.semantic.surface"
  
portfolio_healthy:
  border_color: "colors.semantic.status.success"
  indicator_color: "colors.semantic.profit"
  
portfolio_warning:
  border_color: "colors.semantic.status.warning"
  indicator_color: "colors.semantic.warning"
  
portfolio_critical:
  border_color: "colors.semantic.status.error"
  indicator_color: "colors.semantic.loss"
  
rebalancing:
  progress_color: "colors.semantic.primary"
  background_overlay: "colors.semantic.surface"
```

## Shared Components Usage Summary
- main_navigation: Dashboard header navigation
- page_header: Portfolio dashboard title and summary
- grid_layout: 3 instances (metrics, strategies, risk)
- data_card: 8 instances (various metric containers)
- strategy_card: Multiple instances (one per active strategy)
- metric_display: 12 instances (portfolio and risk metrics)
- performance_chart: Multiple instances (strategy mini-charts)
- correlation_matrix: 1 instance (strategy correlation display)
- status_badge: Multiple instances (strategy status indicators)
- button: 4 instances (rebalance, adjust, refresh actions)

## Token Compliance Summary
- Existing tokens (P25 + P40-10): 92%
- New story patterns: 5%
- Documented exceptions: 3%