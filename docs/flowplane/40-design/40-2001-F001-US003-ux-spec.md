# UX Specification: F001-US003
## Version: 2.0

## Overview
Enable users to analyze correlation between actual strategy returns to ensure portfolio diversification, with visual correlation matrix and diversification scoring to maintain low-correlation strategy portfolios.

## User Flow (Happy Path)
1. Entry: User navigates to Strategy Correlation Analysis from main navigation
2. Analysis: System displays correlation matrix of active strategies with color-coded correlation values
3. Review: User examines correlation patterns and diversification score
4. Action: User identifies high-correlation strategies and reviews diversification recommendations
5. Completion: User understands portfolio correlation structure and takes action if needed

## Screen Specifications

### Screen: Correlation Analysis Dashboard
**Purpose**: Display comprehensive correlation analysis of active strategies with visual matrix and diversification metrics

**Layout**:
- USES: main_navigation from P40-10
- USES: page_header from P40-10
- USES: data_card from P40-10
- USES: correlation_matrix from P40-10
- USES: metric_display from P40-10
- Grid: Two-column layout with correlation matrix (left) and metrics panel (right)

**Design Tokens**:
```yaml
layout:
  container_padding: "spacing.semantic.2xl"
  content_gap: "spacing.semantic.lg"
  grid_columns: "2fr 1fr"
  
colors:
  background: "colors.semantic.background"
  surface: "colors.semantic.surface"
  text_primary: "colors.semantic.text.primary"
  text_secondary: "colors.semantic.text.secondary"
  
typography:
  page_title: "typography.semantic.h2"
  section_title: "typography.semantic.h4"
  body_text: "typography.semantic.body"
  
effects:
  card_shadow: "effects.semantic.card"
  transition: "effects.semantic_transitions.hover"
```

**Component Customization**:
```yaml
page_header:
  overrides:
    title: "Strategy Correlation Analysis"
    subtitle: "Monitor portfolio diversification and strategy correlation patterns"

correlation_matrix:
  overrides:
    showValues: true
    interactive: true
    
metric_display:
  overrides:
    format: "percentage"
    size: "lg"
```

**Interactions**:
- Click matrix cell: Show detailed correlation data with transition `effects.semantic_transitions.hover`
- Hover strategy name: Highlight corresponding row/column with `colors.semantic.primary_light`
- Click diversification score: Show breakdown modal with `effects.semantic.modal`

**Responsive Behavior**:
- Mobile (<768px): Stack vertically, matrix scrollable horizontally, `spacing.semantic.md`
- Desktop (>768px): Two-column grid layout, `spacing.semantic.lg`

### Screen: Strategy Correlation Details Modal
**Purpose**: Show detailed correlation information for selected strategy pair

**Layout**:
- USES: modal from P40-10
- USES: data_card from P40-10
- USES: performance_chart from P40-10
- USES: button from P40-10

**Design Tokens**:
```yaml
layout:
  modal_padding: "spacing.semantic.2xl"
  content_gap: "spacing.semantic.lg"
  
colors:
  modal_background: "colors.semantic.surface_elevated"
  border: "colors.semantic.border.default"
  
typography:
  modal_title: "typography.semantic.h3"
  metric_label: "typography.semantic.body_sm"
  
effects:
  modal_shadow: "effects.semantic.modal"
```

**Component Customization**:
```yaml
modal:
  overrides:
    size: "lg"
    title: "Strategy Correlation Details"
    
performance_chart:
  overrides:
    type: "line"
    height: 300
    showGrid: true
    interactive: true
```

**Interactions**:
- Close modal: Click overlay or close button with `effects.semantic_transitions.modal`
- View strategy details: Navigate to individual strategy analysis

## State Management
**States with Token References**:
```yaml
loading:
  spinner_color: "colors.semantic.primary"
  overlay_background: "colors.semantic.surface"
  text_color: "colors.semantic.text.tertiary"
  
correlation_high:
  matrix_cell_background: "colors.semantic.loss"
  alert_background: "colors.semantic.status.error"
  warning_text: "colors.semantic.text.inverse"
  
correlation_medium:
  matrix_cell_background: "colors.semantic.warning"
  caution_background: "colors.semantic.status.warning"
  caution_text: "colors.semantic.text.primary"
  
correlation_low:
  matrix_cell_background: "colors.semantic.profit"
  success_background: "colors.semantic.status.success"
  success_text: "colors.semantic.text.inverse"
  
diversification_good:
  score_color: "colors.semantic.profit"
  indicator_background: "colors.semantic.status.success"
  
diversification_poor:
  score_color: "colors.semantic.loss"
  indicator_background: "colors.semantic.status.error"
```

## Shared Components Usage Summary
- main_navigation: Page navigation
- page_header: Screen title and context
- correlation_matrix: Primary correlation visualization (2 instances)
- data_card: Metrics containers (4 instances)
- metric_display: Diversification score and key metrics (6 instances)
- modal: Strategy detail overlay
- performance_chart: Historical correlation trends
- button: Action buttons (3 instances)
- loading_spinner: Data loading states

## Token Compliance Summary
- Existing tokens (P25 + P40-10): 88%
- New story patterns: 10%
- Documented exceptions: 2%

## Correlation Thresholds Display
**Visual Indicators**:
```yaml
high_correlation:
  threshold: ">0.7"
  color: "colors.semantic.loss"
  background: "colors.semantic.status.error"
  message: "High correlation - consider strategy adjustment"
  
medium_correlation:
  threshold: "0.3-0.7"
  color: "colors.semantic.warning"
  background: "colors.semantic.status.warning"
  message: "Medium correlation - monitor closely"
  
low_correlation:
  threshold: "<0.3"
  color: "colors.semantic.profit"
  background: "colors.semantic.status.success"
  message: "Good diversification"
```

## Diversification Score Calculation
**Score Display**:
```yaml
score_excellent:
  range: "90-100"
  color: "colors.semantic.profit"
  description: "Excellent diversification"
  
score_good:
  range: "70-89"
  color: "colors.semantic.status.success"
  description: "Good diversification"
  
score_fair:
  range: "50-69"
  color: "colors.semantic.warning"
  description: "Fair diversification - room for improvement"
  
score_poor:
  range: "0-49"
  color: "colors.semantic.loss"
  description: "Poor diversification - action required"
```