# F006-US002 Implementation Guide

## Implementation Context

### Technologies
- **Frontend**: Next.js 14+ with TypeScript, shadcn/ui components
- **State Management**: Zustand for client-side state coordination
- **Styling**: Tailwind CSS with design system tokens
- **API Integration**: Axios with TypeScript code generation
- **Real-time**: WebSocket connections via SVC-005
- **Charts**: Chart.js for portfolio allocation visualization

### Design Tokens Required
- colors.semantic.background, colors.semantic.surface, colors.semantic.surface_elevated
- colors.semantic.text.primary, colors.semantic.text.secondary
- colors.semantic.profit, colors.semantic.loss, colors.semantic.warning
- colors.semantic.status.success, colors.semantic.status.error
- spacing.semantic.lg, spacing.semantic.xl, spacing.semantic.2xl
- typography.semantic.h2, typography.semantic.h4, typography.semantic.price
- components.card.padding, grid.gap

### Infrastructure Services
- **SVC-002**: Strategy execution engine for portfolio data
- **SVC-005**: Real-time notifications for live updates
- **DB-001**: PostgreSQL with TimescaleDB for portfolio history

## Tasks

### Task 1: Portfolio Dashboard Layout Implementation
**Type**: frontend
**Component**: USES: main_navigation, page_header, grid_layout from P40-10
**Design Tokens**: colors.semantic.background, spacing.semantic.2xl, typography.semantic.h2
**Implementation**: 
Implement responsive 3-column dashboard layout as specified in 40-2001-F006-US002-ux-spec.md sections 1-2
**Validation**: Dashboard renders correctly across mobile, tablet, and desktop breakpoints

### Task 2: Portfolio Metrics Display
**Type**: frontend
**Component**: USES: metric_display, data_card from P40-10
**Design Tokens**: colors.semantic.profit, colors.semantic.loss, typography.semantic.price
**Implementation**: 
Display key portfolio metrics (total value, daily P&L, Sharpe ratio) using metric_display components
**Validation**: Metrics update in real-time and show correct profit/loss coloring

### Task 3: Strategy Grid Implementation
**Type**: frontend
**Component**: USES: strategy_card, performance_chart from P40-10
**Design Tokens**: colors.semantic.surface_elevated, spacing.semantic.lg, typography.semantic.h5
**Implementation**: 
Render strategy grid with performance mini-charts as detailed in 40-2001-F006-US002-ux-spec.md section 3
**Validation**: Grid displays all active strategies with correct performance data

### Task 4: Portfolio Allocation Chart
**Type**: frontend
**Component**: CREATES: /shared/allocation_chart
**Design Tokens**: colors.semantic.primary, spacing.scale.80, typography.semantic.price_large
**Implementation**: 
Custom donut chart component using Chart.js for portfolio allocation visualization with documented color exceptions
**Validation**: Chart accurately represents current portfolio allocation percentages

### Task 5: Real-time Data Integration
**Type**: backend
**Component**: USES: SVC-005 from infrastructure registry
**Design Tokens**: N/A
**Implementation**: 
WebSocket connection management for live portfolio updates and strategy performance data
**Validation**: Portfolio data updates within 30 seconds of market changes