# F002-US002 Implementation Tasks (Continued)

### Task 5: Position Sizing Validation
**Type**: backend
**Component**: USES: strategy_execution_engine from SVC-002
**Design Tokens**: N/A
**Implementation**:
Validate position sizes against account equity and strategy limits using PyPortfolioOpt constraints
**Validation**: Positions rejected when exceeding 30% single strategy allocation

### Task 6: Market Hours Verification
**Type**: backend
**Component**: CREATES: /validators/market_hours
**Design Tokens**: N/A
**Implementation**:
Check market status via Alpaca API before order placement with timezone handling
**Validation**: Orders blocked outside market hours with clear error messages

### Task 7: Safety Metrics Dashboard
**Type**: frontend
**Component**: USES: metric_display, performance_chart from P40-10
**Design Tokens**: colors.semantic.profit/loss, typography.semantic.price
**Implementation**:
Display real-time risk metrics as specified in 40-2001-F002-US002-ux-spec.md safety components
**Validation**: Metrics update within 1 second of risk calculation changes

### Task 8: Deployment Success Interface
**Type**: frontend
**Component**: USES: alert_banner, strategy_card from P40-10
**Design Tokens**: colors.semantic.status.success, spacing.semantic.xl
**Implementation**:
Build deployment confirmation as specified in 40-2001-F002-US002-ux-spec.md Screen 3
**Validation**: Success state displays active strategy with live monitoring link

### Task 9: Safety Violation Logging
**Type**: backend
**Component**: CREATES: /logging/safety_audit
**Design Tokens**: N/A
**Implementation**:
Log all safety violations to PostgreSQL with structured data for compliance reporting
**Validation**: All safety events logged with timestamp and violation details

### Task 10: Real-time Safety Alerts
**Type**: backend
**Component**: USES: real_time_notifications from SVC-005
**Design Tokens**: N/A
**Implementation**:
Send WebSocket alerts for safety violations with severity levels and recommended actions
**Validation**: Critical alerts delivered within 1 second of detection

## References
- Full UX: 40-2001-F002-US002-ux-spec.md
- Technical: 40-3001-F002-technical.md
- Components: 40-1001-shared-components.yaml
- Infrastructure: 30-3001-infrastructure-registry.yaml